-- Services
local Players     = game:GetService("Players")
local HttpService = game:GetService("HttpService")

-- Th√¥ng s·ªë game IDs
local GROW_GARDEN_ID    = 126884695634066
local STEAL_BRAINROT_ID = 109983668079237

-- WEBHOOK CONFIG
local WEBHOOK_URL = "https://discord.com/api/webhooks/1383125058867822612/kUD7kD1Wp1Lkz61hk4xV7uAftmWfHK7xW5MJmUiCTts0mvYupyTw3i6kkz9m9cdvwVQo"
local BOT_NAME    = "Chilli Hub Bot"
local BOT_AVATAR  = "https://files.catbox.moe/ncdacd.png"

-- ==== 1. Load ƒë√∫ng script theo PlaceId ngay l·∫≠p t·ª©c ====
do
    local placeId = game.PlaceId
    if placeId == GROW_GARDEN_ID then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Grow-a-Garden"))()
    elseif placeId == STEAL_BRAINROT_ID then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Steal-a-Brainrot"))()
    else
        warn(("No supported script for PlaceId %s"):format(placeId))
    end
end

-- ==== 2. ƒê·∫©y webhook b√°o c√°o (ch·∫°y ri√™ng, kh√¥ng l√†m ch·∫øt thread ch√≠nh) ====
spawn(function()
    local player = Players.LocalPlayer
    if not player then return end

    -- T·∫°o embed
    local embed = {
        title       = "üöÄ Script Executed",
        description = string.format(
            "‚Ä¢ Player: **%s**\n‚Ä¢ PlaceId: `%d`\n‚Ä¢ JobId: `%s`", 
            player.Name, game.PlaceId, game.JobId
        ),
        timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ"),
        color     = 0xFF4500,
    }

    local payload = {
        username   = BOT_NAME,
        avatar_url = BOT_AVATAR,
        embeds     = { embed },
    }
    local body = HttpService:JSONEncode(payload)

    -- B·ªçc trong pcall ƒë·ªÉ kh√¥ng vƒÉng l·ªói
    local ok, res = pcall(function()
        return request({
            Url     = WEBHOOK_URL,
            Method  = "POST",
            Headers = { ["Content-Type"] = "application/json" },
            Body    = body,
        })
    end)
end)
